# 网络访问配置指南

## 🌐 让其他人访问您的网站

### 方法一：局域网访问（同一WiFi/网络）

#### 步骤1：启动服务器（允许外部访问）

**Windows系统：**
```bash
python manage.py runserver 0.0.0.0:8000
```

或者直接双击 `run_server.bat`（已配置为允许外部访问）

**Linux/Mac系统：**
```bash
python manage.py runserver 0.0.0.0:8000
```

#### 步骤2：获取您的IP地址

**Windows系统：**
- 方法1：双击 `get_ip.bat` 文件
- 方法2：在CMD中运行 `ipconfig`，找到"IPv4 地址"
- 方法3：在PowerShell中运行 `ipconfig | findstr IPv4`

**Linux/Mac系统：**
```bash
ifconfig | grep "inet "
# 或
ip addr show
```

您会看到类似这样的IP地址：`192.168.1.100` 或 `10.0.0.5`

#### 步骤3：告诉其他人访问地址

其他人需要在浏览器中输入：
```
http://您的IP地址:8000
```

例如：`http://192.168.1.100:8000`

**重要提示：**
- 确保您的电脑和访问者的设备连接在**同一个WiFi/网络**中
- 确保Windows防火墙允许8000端口的访问（见下方防火墙配置）

---

### 方法二：公网访问（通过云服务器）

如果您有云服务器（2核4G），可以部署到公网：

#### 1. 上传项目到服务器
使用FTP、SCP或Git将项目文件上传到服务器

#### 2. 在服务器上安装依赖
```bash
pip install -r requirements.txt
```

#### 3. 使用Gunicorn启动（生产环境）
```bash
gunicorn reimbursement_system.wsgi:application --bind 0.0.0.0:8000
```

#### 4. 配置防火墙
确保云服务器的安全组/防火墙开放8000端口

#### 5. 访问
其他人可以通过 `http://您的服务器公网IP:8000` 访问

---

## 🔥 Windows防火墙配置

如果其他人无法访问，可能是防火墙阻止了连接：

### 方法1：临时关闭防火墙（不推荐，仅测试用）
1. 打开"Windows安全中心"
2. 点击"防火墙和网络保护"
3. 暂时关闭防火墙（测试完后记得打开）

### 方法2：添加防火墙规则（推荐）
1. 打开"Windows安全中心" → "防火墙和网络保护"
2. 点击"高级设置"
3. 点击"入站规则" → "新建规则"
4. 选择"端口" → 下一步
5. 选择"TCP"，输入端口 `8000` → 下一步
6. 选择"允许连接" → 下一步
7. 勾选所有配置文件 → 下一步
8. 名称填写"报销系统" → 完成

### 方法3：使用命令行（快速）
以管理员身份运行PowerShell：
```powershell
New-NetFirewallRule -DisplayName "报销系统" -Direction Inbound -LocalPort 8000 -Protocol TCP -Action Allow
```

---

## 📱 手机/平板访问

如果您的手机和电脑在同一WiFi下：

1. 启动服务器：`python manage.py runserver 0.0.0.0:8000`
2. 获取电脑IP地址（见上方步骤2）
3. 在手机浏览器输入：`http://电脑IP:8000`

例如：`http://192.168.1.100:8000`

---

## ⚠️ 安全提示

### 开发环境（当前配置）
- `ALLOWED_HOSTS = ['*']` - 允许所有主机访问（仅用于开发）
- `DEBUG = True` - 调试模式开启（会显示详细错误信息）

### 生产环境建议
如果部署到公网，建议修改 `settings.py`：

```python
DEBUG = False
ALLOWED_HOSTS = ['您的域名.com', '您的IP地址']
```

并配置HTTPS（使用Nginx + SSL证书）

---

## 🔍 故障排查

### 问题1：其他人无法访问
**检查清单：**
- ✅ 服务器是否绑定到 `0.0.0.0:8000`（不是 `127.0.0.1:8000`）
- ✅ 防火墙是否允许8000端口
- ✅ 是否在同一网络（WiFi/局域网）
- ✅ IP地址是否正确

### 问题2：连接被拒绝
**解决：**
- 检查防火墙设置
- 确认服务器正在运行
- 尝试使用其他端口：`python manage.py runserver 0.0.0.0:8001`

### 问题3：只能本地访问
**原因：** 使用了 `127.0.0.1` 而不是 `0.0.0.0`
**解决：** 使用 `python manage.py runserver 0.0.0.0:8000`

---

## 📝 快速测试

1. 启动服务器：双击 `run_server.bat`
2. 获取IP：双击 `get_ip.bat`
3. 在手机浏览器输入显示的IP地址
4. 如果能看到登录页面，说明配置成功！

---

## 🚀 推荐配置（局域网使用）

最简单的方式：
1. 双击 `run_server.bat` 启动服务器
2. 双击 `get_ip.bat` 获取IP地址
3. 告诉其他人访问：`http://您的IP:8000`

**注意：** 服务器运行期间，其他人才能访问。关闭服务器后，其他人就无法访问了。




