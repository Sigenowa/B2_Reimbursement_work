# 第4周工作计划：本地部署配置

## 📅 时间安排
- **开始日期**：第4周周一
- **结束日期**：第4周周日
- **预计工时**：15-20小时

## 🎯 本周目标
1. 配置本地开发环境
2. 实现本地部署和运行
3. 配置网络访问
4. 测试局域网访问功能
5. 完成本地部署优化

## 📝 每日任务安排

### 周一：本地环境检查
- [ ] 检查Python环境（3.9+版本）
- [ ] 检查pip包管理器
- [ ] 安装项目依赖包
- [ ] 验证Django安装
- [ ] 测试数据库连接（SQLite）

### 周二：项目配置优化
- [ ] 修改settings.py支持本地部署
- [ ] 配置SQLite数据库（开发环境）
- [ ] 设置DEBUG模式
- [ ] 配置ALLOWED_HOSTS
- [ ] 测试数据库迁移

### 周三：本地服务器配置
- [ ] 配置Django开发服务器
- [ ] 测试本地访问（127.0.0.1:8000）
- [ ] 配置静态文件服务
- [ ] 配置媒体文件服务
- [ ] 创建启动脚本

### 周四：网络访问配置
- [ ] 配置局域网访问（0.0.0.0:8000）
- [ ] 获取本机IP地址
- [ ] 配置防火墙规则
- [ ] 测试手机/平板访问
- [ ] 解决连接问题

### 周五：部署脚本和文档
- [ ] 创建本地部署脚本
- [ ] 创建一键启动脚本
- [ ] 创建IP获取脚本
- [ ] 更新部署文档
- [ ] 编写使用指南

### 周末：测试和优化
- [ ] 功能完整性测试
- [ ] 性能测试（本地）
- [ ] 多设备访问测试
- [ ] 部署流程优化
- [ ] 编写故障排除指南

## 📦 本周新增文件清单

### 1. 本地部署脚本

#### local_deploy.bat (Windows)
- 本地部署一键脚本
- 环境检查和配置
- 数据库初始化

#### local_deploy.sh (Linux/Mac)
- Linux/Mac部署脚本
- 环境检查和配置
- 数据库初始化

#### start_server.bat
- Windows启动脚本
- 自动检测IP地址
- 局域网访问配置

### 2. 数据库配置工具

#### mysql_setup.bat
- MySQL安装和配置脚本
- 数据库创建脚本
- 用户权限配置

#### db_init.py
- 数据库初始化脚本
- 表结构创建
- 初始数据导入

### 3. 本地部署文档

#### 本地部署指南.md
- 详细本地部署步骤
- MySQL配置说明
- 网络访问配置

#### 局域网访问配置.md
- 防火墙配置
- IP地址获取
- 多设备访问

### 4. 更新配置文件

#### reimbursement_system/settings.py
- 已配置为MySQL数据库
- 支持环境变量配置
- 开发环境优化

#### requirements.txt
- 确认包含mysqlclient
- 添加本地开发依赖

## ✅ 验收标准

### 部署验收
- [ ] 本地环境配置完成
- [ ] MySQL数据库正常连接
- [ ] Django服务器能正常启动
- [ ] 本地访问正常（127.0.0.1:8000）

### 网络访问验收
- [ ] 局域网访问正常（192.168.x.x:8000）
- [ ] 防火墙配置正确
- [ ] 其他设备能正常访问

### 功能验收
- [ ] 用户注册登录正常
- [ ] 报销申请功能完整
- [ ] 文件上传下载正常
- [ ] 管理员功能正常

### 性能验收
- [ ] 页面响应速度正常
- [ ] 数据库查询效率良好
- [ ] 多用户同时访问稳定

## 🐛 可能遇到的问题

1. **MySQL安装问题**
   - 解决：使用mysql_setup.bat脚本

2. **数据库连接失败**
   - 解决：检查环境变量和MySQL服务

3. **端口被占用**
   - 解决：更换端口或关闭冲突进程

4. **权限问题**
   - 解决：以管理员身份运行脚本

## 🎯 下周预告

第5周将进行生产环境优化，包括：
- HTTPS配置
- 安全优化
- 性能优化
- 监控和日志
- 备份策略

