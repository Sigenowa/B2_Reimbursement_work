# 局域网访问配置指南

## 🌐 让局域网内的其他设备访问

### 前提条件
- 电脑和访问设备在同一WiFi网络
- 防火墙允许8000端口访问
- Django服务器绑定到 `0.0.0.0:8000`

## 📱 Windows系统配置

### 步骤1：启动服务器
```bash
python manage.py runserver 0.0.0.0:8000
```
或双击 `start_server.bat`

### 步骤2：获取IP地址
运行 `get_ip.bat` 或命令：
```bash
ipconfig | findstr IPv4
```
输出示例：
```
IPv4 地址 . . . . . . . . . . : 192.168.1.100
```

### 步骤3：配置防火墙
1. 打开"Windows安全中心"
2. 点击"防火墙和网络保护"
3. 点击"高级设置"
4. 选择"入站规则" → "新建规则"
5. 选择"端口" → "下一步"
6. 选择"TCP"，输入端口"8000" → "下一步"
7. 选择"允许连接" → "下一步"
8. 勾选所有配置文件 → "下一步"
9. 名称填写"报销系统" → "完成"

### 步骤4：测试访问
- 本地：http://127.0.0.1:8000
- 局域网：http://192.168.1.100:8000

## 🐧 Linux系统配置

### 步骤1：启动服务器
```bash
python3 manage.py runserver 0.0.0.0:8000
```
或运行 `./start_server.sh`

### 步骤2：获取IP地址
```bash
hostname -I
```
或
```bash
ip addr show | grep "inet " | grep -v 127.0.0.1
```

### 步骤3：配置防火墙
```bash
# Ubuntu/Debian
sudo ufw allow 8000

# CentOS/RHEL
sudo firewall-cmd --permanent --add-port=8000/tcp
sudo firewall-cmd --reload
```

### 步骤4：测试访问
- 本地：http://127.0.0.1:8000
- 局域网：http://[您的IP]:8000

## 🍎 macOS系统配置

### 步骤1：启动服务器
```bash
python3 manage.py runserver 0.0.0.0:8000
```
或运行 `./start_server.sh`

### 步骤2：获取IP地址
```bash
ifconfig | grep "inet " | grep -v 127.0.0.1
```

### 步骤3：关闭防火墙（临时）
```bash
# 临时关闭防火墙进行测试
sudo /usr/libexec/ApplicationFirewall/socketfilterfw --setglobalstate off
```

### 步骤4：测试访问
- 本地：http://127.0.0.1:8000
- 局域网：http://[您的IP]:8000

## 📱 移动设备访问

### iPhone/iPad
1. 确保连接到同一WiFi
2. Safari浏览器输入：http://[电脑IP]:8000
3. 如果提示不安全，选择"继续访问"

### Android手机
1. 确保连接到同一WiFi
2. Chrome浏览器输入：http://[电脑IP]:8000
3. 允许不安全连接（如果有提示）

## 🔍 故障排除

### 问题1：其他设备无法访问
**检查清单：**
- ✅ 服务器是否绑定到 `0.0.0.0:8000`（不是 `127.0.0.1`）
- ✅ 防火墙是否允许8000端口
- ✅ 是否在同一网络（WiFi）
- ✅ IP地址是否正确
- ✅ 服务器是否正在运行

**测试命令：**
```bash
# 检查端口是否监听
netstat -ano | findstr :8000  # Windows
netstat -tlnp | grep :8000    # Linux
```

### 问题2：连接超时
**可能原因：**
- 防火墙阻止连接
- IP地址错误
- 服务器未启动
- 端口被其他程序占用

### 问题3：显示"无法访问此网站"
**解决步骤：**
1. 检查IP地址和端口
2. 确认服务器正在运行
3. 测试本地访问是否正常
4. 检查防火墙设置

### 问题4：移动设备无法连接
**检查：**
- 是否连接到同一WiFi
- IP地址是否正确
- 是否有网络限制
- 尝试使用不同的浏览器

## 🔧 高级配置

### 自定义端口
如果8000端口被占用：
```bash
python manage.py runserver 0.0.0.0:8080
```
然后访问：http://[IP]:8080

### 多个网络接口
如果电脑有多个网络接口，指定特定IP：
```bash
python manage.py runserver 192.168.1.100:8000
```

### 自动获取IP脚本
创建 `get_ip.py`：
```python
import socket
import subprocess

def get_local_ip():
    try:
        # 创建socket连接获取本地IP
        s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
        s.connect(("8.8.8.8", 80))
        ip = s.getsockname()[0]
        s.close()
        return ip
    except:
        return "127.0.0.1"

if __name__ == "__main__":
    ip = get_local_ip()
    print(f"您的IP地址: {ip}")
    print(f"访问地址: http://{ip}:8000")
```

## 📊 网络诊断工具

### Windows
```bash
# 测试连接
ping [目标IP]

# 检查端口
telnet [目标IP] 8000
```

### Linux/macOS
```bash
# 测试连接
ping [目标IP]

# 检查端口
nc -zv [目标IP] 8000
```

<<<<<<< HEAD
=======
## 🎯 最佳实践

1. **开发环境**：使用 `0.0.0.0:8000` 绑定所有接口
2. **测试访问**：优先在本机测试，再测试局域网
3. **防火墙**：只开放必要的端口
4. **IP地址**：使用动态获取，避免硬编码
5. **文档记录**：记录访问地址和配置步骤

## 📞 常见问题解答

**Q: 为什么只能本地访问，不能局域网访问？**
A: 服务器可能绑定到了 `127.0.0.1`，需要使用 `0.0.0.0:8000`

**Q: 防火墙配置了还是无法访问？**
A: 可能有其他安全软件阻止，尝试临时关闭防火墙测试

**Q: IP地址变了怎么办？**
A: IP地址可能动态变化，重新获取或设置静态IP

**Q: 移动设备提示不安全？**
A: 这是正常的，因为使用HTTP而不是HTTPS，点击继续即可
>>>>>>> 83f6b4b25d571371466929dc1113e7582b7000cb
